/* ===== Full translations object (RU, EN, PT) ===== */
    const translations = {
      ru: {
        headerTitle: "Saturn-Builder",
        headerSubtitle: "Construct 3 Cordova ZIP to APK Builder",
        badgeLatest: "Последний релиз",
        badgeDownloads: "Загрузки",
        badgePlatform: "Windows 10/11",
        heroTitle: "Saturn-Builder — лёгкая сборка APK/AAB",
        heroSubtitle: "Создавайте Android-приложения из Cordova ZIP (Construct 3, HTML5) без сложной настройки.",
        badgeFeature1: "Auto-install deps",
        badgeFeature2: "Fast builds",
        badgeFeature3: "Multi-language",
        releaseNoteShort: "v1.5.0 — Portuguese localization, HTML5 plugins",
        heroNote: "Нажмите «Скачать», чтобы получить установщик. Программа самостоятельно установит зависимости (~1 ГБ).",
        demoCaption: "Демо: процесс автоматической сборки APK",
        navWhat: "Что такое?",
        navFeatures: "Возможности",
        navStart: "Как начать",
        navUsage: "Как пользоваться",
        whatIsTitle: "Что такое Saturn-Builder?",
        whatIsP1: "Saturn-Builder — это удобное приложение на Python, которое поможет вам создавать приложения для Android без сложной настройки. Оно самостоятельно загружает и устанавливает все необходимые инструменты (около 1 ГБ). Независимо от того, новичок вы в создании приложений или у вас есть опыт, этот инструмент упрощает процесс!",
        whatIsP2: "English: Saturn-Builder is a friendly app made with Python that helps you build Android apps without complicated setup.",
        quickBenefitsTitle: "Коротко о выгодах",
        benefit1: "Автоматическая установка зависимостей (~1 ГБ)",
        benefit2: "Простая сборка APK/AAB",
        benefit3: "Мульти-язык интерфейса",
        benefit4: "Понятные логи и прогресс сборки",
        benefit5: "Бесплатно и открыто для каждого",
        featuresTitle: "Возможности",
        features_col_feature: "Функция",
        features_col_desc: "Описание",
        f1_title: "Лёгкая настройка",
        f1_desc: "Автоматически устанавливает необходимые инструменты (~1 ГБ).",
        f2_title: "Создание приложений",
        f2_desc: "Создаёт APK или AAB файлы для Android-приложений.",
        f3_title: "Смена языка",
        f3_desc: "Переключайте язык интерфейса на английский, русский или португальский.",
        f4_title: "Показ прогресса",
        f4_desc: "Отображает, что происходит во время сборки (логи и проценты).",
        f5_title: "Простой интерфейс",
        f5_desc: "Удобный экран для управления всем процессом — понятные кнопки и подсказки.",
        startTitle: "Как начать",
        startIntro: "Saturn-Builder работает на Windows 10 или 11.",
        start_step1_title: "Шаг 1",
        start_step1_html: 'Перейдите на <a href="https://github.com/EwenLoy/Saturn-Builder/releases/" target="_blank" rel="noopener noreferrer">страницу релизов</a> и скачайте <strong>Saturn-Builder.exe</strong>.',
        start_step2_title: "Шаг 2",
        start_step2: "Дважды кликните на файл для установки и запуска приложения.",
        start_step3_title: "Шаг 3",
        watchVideoBtn: "Смотреть видеогайд",
        downloadBtn: "Скачать установщик (v1.5.0)",
        repoBtn: "Открыть репозиторий",
        downloadButton: "Скачать последний релиз (v1.5.0)",
        releasesBtn: "Страница релизов",
        usageTitle: "Как пользоваться",
        usage_step1_title: "Первый запуск",
        usage_step1_desc: 'После установки кликните на <strong>Saturn-Builder.exe</strong>. При первом запуске предложит установить зависимости (~1 ГБ). Нажмите <code>"Install dependencies"</code> или <code>"Skip for Now"</code> (без них сборка не сработает).',
        usage_warning_title: "Важно!",
        usage_warning_text: "Saturn-Builder.exe должен быть в папке с английским названием! Русские символы в пути — не работают.",
        usage_warning_example_ok: '✅ <code>D:\\\\FOLDER\\\\SaturnBuilder_1.0.exe</code>',
        usage_warning_example_bad: '❌ <code>D:\\\\папка на русском\\\\SaturnBuilder_1.0.exe</code>',
        usage_step2_title: "Выберите язык",
        usage_step2_desc: "После установки зависимостей выберите английский, русский или португальский в выпадающем меню. Интерфейс изменится сразу!",
        usage_step3_title: "Загрузите проект",
        usage_step3_desc: 'Нажмите <strong>"Load project"</strong> и выберите ZIP-архив Cordova, проект Android Studio или HTML5.',
        usage_step4_title: "Выберите тип сборки",
        usage_step4_build_types: '<ul><li>Debug APK</li><li>Unsigned release APK</li><li>Unsigned Android App Bundle (AAB)</li><li>Signed debug APK</li><li>Signed release APK</li><li>Signed Android App Bundle</li></ul>',
        usage_step5_title: "Соберите приложение",
        usage_step5_desc: "Если нужна подпись, загрузите или создайте ключи. Нажмите «Build» и следите за прогрессом в окне логов.",
        usage_step6_title: "Получите приложение",
        usage_step6_desc: "Когда сборка закончится, файлы APK/AAB будут в папке проекта, и она автоматически откроется.",
        footerText: '&copy; 2025 EwenLoy | <a href="https://github.com/EwenLoy/Saturn-Builder" target="_blank" rel="noopener noreferrer">GitHub Repository</a> | v1.5.0: Fixed bugs, Portuguese localization, HTML5 plugins support.',
        logoAlt: "Логотип Saturn-Builder",
        demoGifAlt: "Демонстрация сборки APK",
        closeBtn: "Закрыть",
        githubBtn: "GitHub"
      },
      en: {
        headerTitle: "Saturn-Builder",
        headerSubtitle: "Construct 3 Cordova ZIP to APK Builder",
        badgeLatest: "Latest Release",
        badgeDownloads: "Downloads",
        badgePlatform: "Windows 10/11",
        heroTitle: "Saturn-Builder — easy APK/AAB builds",
        heroSubtitle: "Build Android apps from Cordova ZIPs (Construct 3, HTML5) without complicated setup.",
        badgeFeature1: "Auto-install deps",
        badgeFeature2: "Fast builds",
        badgeFeature3: "Multi-language",
        releaseNoteShort: "v1.5.0 — Portuguese localization, HTML5 plugins",
        heroNote: "Click Download to get the installer. The app will auto-install dependencies (~1 GB).",
        demoCaption: "Demo: automated APK build process",
        navWhat: "What is it?",
        navFeatures: "Features",
        navStart: "How to Start",
        navUsage: "How to Use",
        whatIsTitle: "What is Saturn-Builder?",
        whatIsP1: "Saturn-Builder is a friendly Python application that helps you create Android apps without a complicated setup. It automatically downloads and installs all required tools (~1 GB). Whether you are new to app building or experienced, this tool streamlines the process!",
        whatIsP2: "Русский: Saturn-Builder — это удобное приложение на Python, которое поможет вам создавать приложения для Android без сложной настройки. Оно самостоятельно загружает и устанавливает все необходимые инструменты (около 1 ГБ).",
        quickBenefitsTitle: "Quick benefits",
        benefit1: "Auto installs required dependencies (~1 GB)",
        benefit2: "Build APK/AAB with a few clicks",
        benefit3: "Multi-language UI (EN/RU/PT)",
        benefit4: "Clear logs & progress display",
        benefit5: "Free and open for everyone",
        featuresTitle: "Features",
        features_col_feature: "Feature",
        features_col_desc: "Description",
        f1_title: "Easy setup",
        f1_desc: "Automatically installs required tools (~1 GB).",
        f2_title: "App building",
        f2_desc: "Creates APK or AAB Android application files.",
        f3_title: "Language switch",
        f3_desc: "Switch UI language between English, Russian and Portuguese.",
        f4_title: "Progress display",
        f4_desc: "Shows build progress (logs & percentages).",
        f5_title: "Simple interface",
        f5_desc: "A clean control screen with clear buttons and tooltips.",
        startTitle: "How to Start",
        startIntro: "Saturn-Builder runs on Windows 10 or 11.",
        start_step1_title: "Step 1",
        start_step1_html: 'Go to the <a href="https://github.com/EwenLoy/Saturn-Builder/releases/" target="_blank" rel="noopener noreferrer">releases page</a> and download <strong>Saturn-Builder.exe</strong>.',
        start_step2_title: "Step 2",
        start_step2: "Double-click the file to install and launch the application.",
        start_step3_title: "Step 3",
        watchVideoBtn: "Watch Video Guide",
        downloadBtn: "Download installer (v1.5.0)",
        repoBtn: "Open repository",
        downloadButton: "Download latest release (v1.5.0)",
        releasesBtn: "Releases page",
        usageTitle: "How to Use",
        usage_step1_title: "First run",
        usage_step1_desc: 'After installation click <strong>Saturn-Builder.exe</strong>. On first run it will prompt to install dependencies (~1 GB). Click <code>"Install dependencies"</code> or <code>"Skip for Now"</code> (but without dependencies the build will not work).',
        usage_warning_title: "Warning!",
        usage_warning_text: "Saturn-Builder.exe must be placed in a folder with an English-only path! Non-Latin characters (e.g., Cyrillic) in the path may break the tool.",
        usage_warning_example_ok: '✅ <code>D:\\\\FOLDER\\\\SaturnBuilder_1.0.exe</code>',
        usage_warning_example_bad: '❌ <code>D:\\\\папка на русском\\\\SaturnBuilder_1.0.exe</code>',
        usage_step2_title: "Choose language",
        usage_step2_desc: "After dependencies install select English, Russian or Portuguese from the dropdown. The UI updates instantly!",
        usage_step3_title: "Upload project",
        usage_step3_desc: 'Click <strong>"Load project"</strong> and select a Cordova ZIP, Android Studio project, or HTML5 export.',
        usage_step4_title: "Select build type",
        usage_step4_build_types: '<ul><li>Debug APK</li><li>Unsigned release APK</li><li>Unsigned Android App Bundle (AAB)</li><li>Signed debug APK</li><li>Signed release APK</li><li>Signed Android App Bundle</li></ul>',
        usage_step5_title: "Build the app",
        usage_step5_desc: "If signing is required, upload or create keystores. Click «Build» and watch the progress in the log window.",
        usage_step6_title: "Retrieve your app",
        usage_step6_desc: "When the build finishes, APK/AAB files will be in the project folder and the folder will open automatically.",
        footerText: '&copy; 2025 EwenLoy | <a href="https://github.com/EwenLoy/Saturn-Builder" target="_blank" rel="noopener noreferrer">GitHub Repository</a> | v1.5.0: Fixed bugs, Portuguese localization, HTML5 plugins support.',
        logoAlt: "Saturn-Builder logo",
        demoGifAlt: "APK build demo",
        closeBtn: "Close",
        githubBtn: "GitHub"
      },
      pt: {
        headerTitle: "Saturn-Builder",
        headerSubtitle: "ZIP Cordova do Construct 3 para APK Builder",
        badgeLatest: "Último Lançamento",
        badgeDownloads: "Downloads",
        badgePlatform: "Windows 10/11",
        heroTitle: "Saturn-Builder — builds APK/AAB com facilidade",
        heroSubtitle: "Crie apps Android a partir de ZIPs Cordova (Construct 3, HTML5) sem configuração complicada.",
        badgeFeature1: "Auto-install deps",
        badgeFeature2: "Builds rápidos",
        badgeFeature3: "Multi-idioma",
        releaseNoteShort: "v1.5.0 — localização PT, suporte plugins HTML5",
        heroNote: "Clique em Baixar para obter o instalador. O app instalará automaticamente as dependências (~1 GB).",
        demoCaption: "Demonstração: processo automatizado de build de APK",
        navWhat: "O que é?",
        navFeatures: "Recursos",
        navStart: "Como começar",
        navUsage: "Como usar",
        whatIsTitle: "O que é Saturn-Builder?",
        whatIsP1: "Saturn-Builder é um aplicativo em Python que ajuda você a criar apps Android sem configuração complicada. Он автоматически загружает и устанавливает все необходимые инструменты (~1 ГБ). Quer você seja iniciante ou experiente, esta ferramenta simplifica o processo!",
        whatIsP2: "English: Saturn-Builder is a friendly app made with Python that helps you build Android apps without complicated setup.",
        quickBenefitsTitle: "Vantagens rápidas",
        benefit1: "Instala dependências automaticamente (~1 GB)",
        benefit2: "Cria APK/AAB com poucos cliques",
        benefit3: "Interface multi-idioma",
        benefit4: "Logs claros e progresso visível",
        benefit5: "Gratuito e aberto para todos",
        featuresTitle: "Recursos",
        features_col_feature: "Recurso",
        features_col_desc: "Descrição",
        f1_title: "Configuração fácil",
        f1_desc: "Instala automaticamente as ferramentas necessárias (~1 GB).",
        f2_title: "Criação de apps",
        f2_desc: "Gera arquivos APK ou AAB para Android.",
        f3_title: "Troca de idioma",
        f3_desc: "Alterne o idioma da interface entre Inglês, Russo e Português.",
        f4_title: "Exibição de progresso",
        f4_desc: "Mostra o progresso da compilação (logs и percentuais).",
        f5_title: "Interface simples",
        f5_desc: "Tela de controle limpa com botões и dicas claras.",
        startTitle: "Como começar",
        startIntro: "Saturn-Builder roda no Windows 10 ou 11.",
        start_step1_title: "Passo 1",
        start_step1_html: 'Acesse a <a href="https://github.com/EwenLoy/Saturn-Builder/releases/" target="_blank" rel="noopener noreferrer">página de releases</a> e baixe <strong>Saturn-Builder.exe</strong>.',
        start_step2_title: "Passo 2",
        start_step2: "Clique duas vezes no arquivo para instalar e executar o aplicativo.",
        start_step3_title: "Passo 3",
        watchVideoBtn: "Assistir Guia em Vídeo",
        downloadBtn: "Baixar instalador (v1.5.0)",
        repoBtn: "Abrir repositório",
        downloadButton: "Baixar última versão (v1.5.0)",
        releasesBtn: "Página de releases",
        usageTitle: "Como usar",
        usage_step1_title: "Primeira execução",
        usage_step1_desc: 'Após a instalação, clique em <strong>Saturn-Builder.exe</strong>. Na primeira execução, será solicitado instalar dependências (~1 GB). Clique em <code>"Install dependencies"</code> ou <code>"Skip for Now"</code> (sem dependências, o build não funcionará).',
        usage_warning_title: "Importante!",
        usage_warning_text: "Saturn-Builder.exe deve estar em uma pasta com nome em caracteres latinos! Caminhos com caracteres não latinos (por exemplo, cirílico) podem quebrar a ferramenta.",
        usage_warning_example_ok: '✅ <code>D:\\\\FOLDER\\\\SaturnBuilder_1.0.exe</code>',
        usage_warning_example_bad: '❌ <code>D:\\\\pasta em portugues\\\\SaturnBuilder_1.0.exe</code>',
        usage_step2_title: "Escolha idioma",
        usage_step2_desc: "Após instalar dependências, selecione Inglês, Russo ou Português no menu. A interface será atualizada instantaneamente!",
        usage_step3_title: "Carregue o projeto",
        usage_step3_desc: 'Clique em <strong>"Load project"</strong> e selecione um ZIP Cordova, projeto Android Studio ou exportação HTML5.',
        usage_step4_title: "Selecione o tipo de build",
        usage_step4_build_types: '<ul><li>Debug APK</li><li>Unsigned release APK</li><li>Unsigned Android App Bundle (AAB)</li><li>Signed debug APK</li><li>Signed release APK</li><li>Signed Android App Bundle</li></ul>',
        usage_step5_title: "Compile o app",
        usage_step5_desc: "Se for necessário assinar, suba ou crie os keystores. Clique em 'Build' e acompanhe o progresso na janela de logs.",
        usage_step6_title: "Recupere seu app",
        usage_step6_desc: "Quando o build terminar, os arquivos APK/AAB estarão na pasta do projeto e a pasta será aberta automaticamente.",
        footerText: '&copy; 2025 EwenLoy | <a href="https://github.com/EwenLoy/Saturn-Builder" target="_blank" rel="noopener noreferrer">GitHub Repository</a> | v1.5.0: Fixed bugs, Portuguese localization, HTML5 plugins support.',
        logoAlt: "Logotipo Saturn-Builder",
        demoGifAlt: "Demonstração de build de APK",
        closeBtn: "Fechar",
        githubBtn: "GitHub"
      }
    };
    // ----------------------
    function applyTranslations(lang){
      const dict = (translations[lang]) ? translations[lang] : translations.ru;
      document.querySelectorAll('[data-i18n]').forEach(el=>{
        const key = el.getAttribute('data-i18n');
        if(key && dict[key] !== undefined) {
          // span inside buttons handled later, so for plain elements set textContent
          if(el.tagName.toLowerCase() === 'a' && el.classList.contains('btn')) {
            // handled below
          } else {
            el.textContent = dict[key];
          }
        }
      });
      document.querySelectorAll('[data-i18n-html]').forEach(el=>{
        const key = el.getAttribute('data-i18n-html');
        if(key && dict[key] !== undefined) el.innerHTML = dict[key];
      });
      document.querySelectorAll('[data-i18n-alt]').forEach(el=>{
        const key = el.getAttribute('data-i18n-alt');
        if(key && dict[key] !== undefined) el.alt = dict[key];
      });
      // buttons with span
      document.querySelectorAll('.btn').forEach(btn=>{
        const key = btn.getAttribute('data-i18n');
        if(key && dict[key] !== undefined){
          const span = btn.querySelector('span');
          if(span) span.textContent = dict[key];
          else btn.textContent = dict[key];
        }
      });
      const videoBtn = document.getElementById('videoGuideBtn');
      if(videoBtn){
        if(lang === 'ru') videoBtn.href = 'https://www.youtube.com/watch?v=F3EWrLdfKYM';
        else videoBtn.href = 'https://www.youtube.com/watch?v=iGbkVkpYeIA';
      }
      document.querySelectorAll('.lang-btn').forEach(b=>{
        const l = b.getAttribute('data-lang');
        if(l === lang){ b.classList.add('active'); b.setAttribute('aria-pressed','true'); } else { b.classList.remove('active'); b.setAttribute('aria-pressed','false'); }
      });
      // fill nav links (they are anchors)
      document.querySelectorAll('nav.top-nav a.navlink').forEach(a=>{
        const key = a.getAttribute('data-i18n');
        if(key && dict[key] !== undefined) a.textContent = dict[key];
      });
      // mobile menu strings may be used later
      // fill footer html
      const footerEl = document.querySelector('[data-i18n-html="footerText"]');
      if(footerEl && dict.footerText) footerEl.innerHTML = dict.footerText;
    }
    const savedLang = localStorage.getItem('saturn_lang') || (navigator.language && navigator.language.startsWith('pt') ? 'pt' : (navigator.language && navigator.language.startsWith('en') ? 'en' : 'ru'));
    applyTranslations(savedLang);
    document.querySelectorAll('.lang-btn').forEach(btn=>{ btn.addEventListener('click',()=>{
      const lang = btn.getAttribute('data-lang');
      applyTranslations(lang);
      localStorage.setItem('saturn_lang', lang);
      if (mobileOpen) { hideMobileMenu(); showMobileMenu(); }
    }); });
    // smooth anchors
    document.querySelectorAll('a[href^="#"]').forEach(a=>{
      a.addEventListener('click', function(e){
        const target = document.querySelector(this.getAttribute('href'));
        if(target){ e.preventDefault(); target.scrollIntoView({behavior:'smooth', block:'start'}); }
      });
    });
    // mobile menu
    const mobileToggle = document.getElementById('mobileMenuToggle');
    let mobileOpen = false;
    mobileToggle.addEventListener('click', ()=>{ mobileOpen = !mobileOpen; if(mobileOpen) showMobileMenu(); else hideMobileMenu(); });
    
    function showMobileMenu(){
      const currentLang = localStorage.getItem('saturn_lang') || savedLang;
      const dict = translations[currentLang] || translations.ru;
      const overlay = document.createElement('div'); 
      overlay.id = 'mobileNavOverlay';
      overlay.style = `
        position: fixed;
        top: 110px;
        left: 12px;
        right: 12px;
        bottom: 12px;
        background: linear-gradient(180deg, rgba(6,6,10,0.96), rgba(6,6,10,0.92));
        backdrop-filter: blur(10px);
        border-radius: 22px;
        padding: 32px;
        overflow-y: auto;
        z-index: 1050;
        color: var(--text);
        font-weight: 700;
      `;
      
      overlay.innerHTML = `
        <div class="mobile-menu-content">
          <a href="#what-is" class="navlink mobile-item">
            <i class="fas fa-info-circle"></i> ${dict.navWhat}
          </a>
          <a href="#features" class="navlink mobile-item">
            <i class="fas fa-cogs"></i> ${dict.navFeatures}
          </a>
          <a href="#start" class="navlink mobile-item">
            <i class="fas fa-play-circle"></i> ${dict.navStart}
          </a>
          <a href="#usage" class="navlink mobile-item">
            <i class="fas fa-question-circle"></i> ${dict.navUsage}
          </a>
          <a href="https://github.com/EwenLoy/Saturn-Builder" target="_blank" class="navlink mobile-item github-btn">
            <i class="fab fa-github"></i> ${dict.githubBtn}
          </a>
          <button id="closeMobileNav" class="close-btn">
            <i class="fas fa-times"></i> ${dict.closeBtn}
          </button>
        </div>
      `;
      
      document.body.appendChild(overlay);
      
      document.getElementById('closeMobileNav').addEventListener('click', hideMobileMenu);
      overlay.querySelectorAll('a').forEach(a=> a.addEventListener('click', ()=> setTimeout(hideMobileMenu, 200)));
    }
    
    function hideMobileMenu(){ 
      const overlay = document.getElementById('mobileNavOverlay'); 
      if(overlay) overlay.remove(); 
      mobileOpen = false; 
    }
    
    // back to top
    const backToTop = document.getElementById('backToTop');
    window.addEventListener('scroll', ()=>{ if(window.scrollY > window.innerHeight/2) backToTop.classList.add('show'); else backToTop.classList.remove('show'); });
    backToTop.addEventListener('click', ()=> window.scrollTo({top:0,behavior:'smooth'}));
    // reveal on scroll
    const io = new IntersectionObserver((entries)=>{ entries.forEach(en=>{ if(en.isIntersecting){ en.target.style.transform = 'translateY(0)'; en.target.style.opacity = '1'; en.target.style.transition = 'opacity .7s ease, transform .7s ease'; io.unobserve(en.target); } }); }, {threshold:0.12});
    document.querySelectorAll('section, .card').forEach(el=>{ el.style.transform = 'translateY(18px)'; el.style.opacity = '0'; io.observe(el); });
    window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') hideMobileMenu(); });
    function fillInitialAlts(){ const lang = localStorage.getItem('saturn_lang') || savedLang; const dict = translations[lang]; document.querySelectorAll('[data-i18n-alt]').forEach(el=>{ const key = el.getAttribute('data-i18n-alt'); if(key && dict && dict[key]) el.alt = dict[key]; }); }
    fillInitialAlts();
    // central download/hrefs
    const downloadUrl = "https://github.com/EwenLoy/Saturn-Builder/releases/download/v1.5.0_betta_release/SaturnBuilder_1.5.exe";
    ['downloadMainBtn','downloadBtnLarge'].forEach(id=>{
      const el = document.getElementById(id);
      if(el) el.href = downloadUrl;
    });
    // ensure repo button label set
    const repoBtn = document.getElementById('repoBtn');
    if(repoBtn) repoBtn.href = "https://github.com/EwenLoy/Saturn-Builder";
    console.log("Saturn-Builder (iOS26 glass) page loaded. Language:", localStorage.getItem('saturn_lang') || savedLang);